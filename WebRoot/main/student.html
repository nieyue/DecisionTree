<div class="right-body">
<!-- 学生列表选择 -->
<div style="margin:10px;">
<label  class="text-danger nieyueText" style="font-size:30px;color:#ccc;">学生列表</label>
</div>
<div style="margin:10px;">
<button class="btn btn-primary">添加学生</button>
</div>
<!-- 学生列表选择end -->
<!-- 学生列表 -->
		<div style="width:100%" class="tableWrap">
			<table class="table table-bordered" style="width:100%">
				<!--表格头-->
    			<thead>
					<tr>
					  <th>序号</th>
					  <th>学生id</th>
					  <th>姓名</th>
					  <th>手机号</th>
					  <th>创建时间</th>
					  <th>最后登陆时间</th>
					  <th >操作</th> 
					</tr>
    			</thead>
    			<!--表格主体-->
    			<tbody id="tableTbody">
				</tbody>
			</table>
		</div>
<!-- 学生列表end -->
	<!-- 页面列表end -->


<!-- 分页 -->
<div class="page_div">
<!--分页条信息 -->
	<div class="page_label" id="di">
		<nav aria-label="Page navigation">
	    	<ul class="pagination">
		    </ul>
		</nav>	
	</div>
<!--分页文字信息  -->
	<div class="page_font"></div>
</div> 
<!--分页 end -->
</div>
<script>
 	//分页初始化
	 var  params={
	      startNum:1,//初始化个数
	      currentPage:1,//当前页
	      pageNum:1,//获取的第几个开始
	      pageSize:10,//每页的个数
	      total:0//总数
  	};
  	function initPage(){
	var result={
		currentPage:params.currentPage,//当前页
		pageSize:params.pageSize,//每页条数
		totalPage:(params.total)%(params.pageSize)==0?(params.total)/(params.pageSize):parseInt((params.total)/(params.pageSize))+1,//总页数
		total:params.total//总条数
	}
	showPage(result);
  	}
  	//请求参数
			console.log(roleList)
  	for(var i=0;i<roleList.length;i++){
				if(roleList[i].name=='学生'){
  				params.roleId=roleList[i].roleId;
				}
			}
	getList(params);
	function getList(params){
	$.ajax({
			url:domainUrl+"/account/countAll",
			type:"get",
			data:params,
			success:function(data){
			if(data.code==200){
				$.ajax({
					url:domainUrl+"/account/list",
					data:params,
					type:"post",
					success:function(result){
						if(result.code==200){
						var accountList=result.data.list;
						params.total=result.data.list.length;
						var tableTbody="<div class='text-center'>暂无数据</div>";
						if(accountList.length<=0){
						$("table").after(tableTbody);
						return;
						}
						for(var i=0;i<accountList.length;i++){
							tableTbody+="<tr>"+
										  "<td>"+
										      "<span>"+(i+(params.currentPage-1)*params.pageSize+params.startNum)+"</span>"+
										  "</td>"+
										  "<td>"+
										      "<span>"+accountList[i].accountId+"</span>"+
										  "</td>"+
										  "<td>"+
										      "<span>"+accountList[i].realname+"</span>"+
										  "</td>"+
										  "<td>"+
										      "<span>"+accountList[i].phone+"</span>"+
										  "</td>"+
										  "<td>"+
										      "<span>"+accountList[i].createDate+"</span>"+
										  "</td>"+
										  "<td>"+
										      "<span>"+accountList[i].loginDate+"</span>"+
										  "</td>"+
										  "<td>"+
										      "<button class='btn btn-warning'>修改</span>"+
										  "</td>"+
										"</tr>";
						}
						//表格数据
						$("#tableTbody").html(tableTbody);
						initPage();
						}else{
							myUtils.myPrevToast("暂无数据")
						}
					}	
				});
			}
			}
			});
	}
	
</script>